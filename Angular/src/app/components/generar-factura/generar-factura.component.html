<div class="container-fluid">
  <div class="row">
    <div class="col-lg-12">
      <h1>Generar Factura</h1>
    </div>
    <div class="col-lg-6">
      <form (ngSubmit)="onSubmit(); facturaForm.reset()" #facturaForm="ngForm">
        <div class="form-group">
          <label for="proveedor">Proveedor</label>
          <input type="text" class="form-control" id="proveedor"
                 required
                 [(ngModel)]="facturaModel.proveedor" name="proveedor"
                 #proveedor="ngModel">
          <div [hidden]="proveedor.valid || proveedor.pristine"
               class="alert alert-danger">
             Proveedor is required
          </div>
        </div>

        <div class="form-group">
          <label for="direccion_proveedor">Dirección Proveedor</label>
          <input type="text" class="form-control" id="direccion_proveedor"
                  required
                  [(ngModel)]="facturaModel.direccion_proveedor" name="direccion_proveedor"
                  #direccion_proveedor="ngModel">
           <div [hidden]="direccion_proveedor.valid || direccion_proveedor.pristine"
                class="alert alert-danger">
                Dirección is required
           </div>
        </div>

        <div class="form-group">
          <label for="rfc_proveedor">Rfc proveedor</label>
          <input type="text" class="form-control" id="rfc_proveedor"
                  required
                  [(ngModel)]="facturaModel.rfc_proveedor" name="rfc_proveedor"
                  #rfc_proveedor="ngModel">
           <div [hidden]="rfc_proveedor.valid || rfc_proveedor.pristine"
                class="alert alert-danger">
                RFC proveedor is required
           </div>
        </div>

        <div class="form-group">
          <label for="cliente">Cliente</label>
          <select class="form-control" id="cliente"
             required
             [(ngModel)]="facturaModel.cliente" name="cliente"
             #cliente="ngModel">
      	    <option></option>
            <option *ngFor="let cliente of clientes" [value]="cliente">{{cliente}}</option>

          </select>
          <div [hidden]="cliente.valid || cliente.pristine"
               class="alert alert-danger">
               Cliente is required
          </div>
        </div>

        <div class="form-group">
          <label for="direccion_cliente">Dirección Cliente</label>
          <input type="text" class="form-control" id="direccion_cliente"
                  required
                  [(ngModel)]="facturaModel.direccion_cliente" name="direccion_cliente"
                  #direccion_cliente="ngModel">
           <div [hidden]="direccion_cliente.valid || direccion_cliente.pristine"
                class="alert alert-danger">
                Dirección is required
           </div>
        </div>

        <div class="form-group">
          <label for="rfc_Cliente">Rfc cliente</label>
          <input type="text" class="form-control" id="rfc_Cliente"
                  required
                  [(ngModel)]="facturaModel.rfc_Cliente" name="rfc_Cliente"
                  #rfc_Cliente="ngModel">
           <div [hidden]="rfc_Cliente.valid || rfc_Cliente.pristine"
                class="alert alert-danger">
                RFC cliente is required
           </div>
        </div>

        <div class="form-group">
          <label for="fecha">Fecha</label>
          <input type="date" class="form-control" id="fecha"
                  required
                  [(ngModel)]="facturaModel.fecha" name="fecha"
                  #fecha="ngModel">
           <div [hidden]="fecha.valid || fecha.pristine"
                class="alert alert-danger">
                Fecha cliente is required
           </div>
        </div>

        <div class="form-group">
          <label for="impuesto">Impuesto</label>
          <input type="number" class="form-control" id="impuesto"
                  required
                  [(ngModel)]="facturaModel.impuesto" name="impuesto"
                  #impuesto="ngModel">
           <div [hidden]="impuesto.valid || impuesto.pristine"
                class="alert alert-danger">
                Impuesto is required
           </div>
        </div>

        <button type="submit" class="btn btn-primary"
                [disabled]="!facturaForm.form.valid">Crear</button>

      </form>
    </div>

    <!--- Concepto Form -->
    <div class="col-lg-6">
      <h4>Concepto</h4>
        <form (ngSubmit)="agregarConcepto(); conceptoForm.reset()" #conceptoForm="ngForm">
          <div class="form-group">
            <label for="nombre">Nombre</label>
            <input type="text" class="form-control" id="nombre"
                   required
                   [(ngModel)]="conceptoModel.nombre" name="nombre"
                   #nombre="ngModel">
            <div [hidden]="nombre.valid || nombre.pristine"
                 class="alert alert-danger">
               Nombre is required
            </div>
          </div>
          <div class="form-group">
            <label for="cantidad">Cantidad</label>
            <input type="number" class="form-control" id="cantidad"
                   required
                   [(ngModel)]="conceptoModel.cantidad" name="cantidad"
                   #cantidad="ngModel">
            <div [hidden]="cantidad.valid || cantidad.pristine"
                 class="alert alert-danger">
               Cantidad is required
            </div>
          </div>
          <div class="form-group">
            <label for="precio_unitario">Precio unitario</label>
            <input type="number" class="form-control" id="precio_unitario"
                   required
                   [(ngModel)]="conceptoModel.precio_unitario" name="precio_unitario"
                   #precio_unitario="ngModel">
            <div [hidden]="precio_unitario.valid || precio_unitario.pristine"
                 class="alert alert-danger">
               Precio unitario is required
            </div>
          </div>

          <button type="submit" class="btn btn-primary"
          [disabled]="!conceptoForm.form.valid">Añadir</button>
        </form>

        <hr>

        <div class="card shadow mb-4">
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-sm fixed_header">
                <thead>
                  <tr>
                    <th>Concepto</th>
                    <th>Cantidad</th>
                    <th>Precio Unitario</th>
                    <th>Importe</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let concepto of conceptos" tabla-conceptos [concepto]="concepto"></tr>
                </tbody>
              </table>
            </div>
            <h3>Total: {{facturaModel.total}}</h3>
          </div>
        </div>

    </div>

  </div>

</div>
